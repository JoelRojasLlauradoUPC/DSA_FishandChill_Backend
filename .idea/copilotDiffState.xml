<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/public/shop/index.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/public/shop/index.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;/&gt;&#10;    &lt;title&gt;Fish &amp; Chill Shop&lt;/title&gt;&#10;&#10;    &lt;style&gt;&#10;        @font-face {&#10;            font-family: &quot;PixelFont&quot;;&#10;            src: url(&quot;../font/pixel_font.ttf&quot;) format(&quot;truetype&quot;);&#10;            font-weight: 400;&#10;            font-style: normal;&#10;            font-display: swap;&#10;        }&#10;&#10;        :root {&#10;            --ink: #ffffff;&#10;            --muted: rgba(255, 255, 255, .88);&#10;            --stats: rgba(255, 255, 255, .82);&#10;            --button: #2a86c7;&#10;            --button-hover: #2476ad;&#10;        }&#10;&#10;        * {&#10;            box-sizing: border-box;&#10;            user-select: none;&#10;        }&#10;&#10;        body {&#10;            margin: 0;&#10;            font-family: &quot;PixelFont&quot;, system-ui, -apple-system, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif;&#10;            background: radial-gradient(1200px 800px at 20% -10%, rgba(5, 25, 50, 0.6), transparent 70%),&#10;            radial-gradient(1200px 800px at 120% 0%, rgba(10, 40, 70, 0.6), transparent 70%),&#10;            #0b2239;&#10;            color: var(--ink);&#10;            overflow-x: hidden;&#10;        }&#10;&#10;        .bg-anim {&#10;            position: fixed;&#10;            inset: 0;&#10;            overflow: hidden;&#10;            pointer-events: none;&#10;            z-index: -1;&#10;        }&#10;&#10;        .bubbles span {&#10;            position: absolute;&#10;            bottom: -80px;&#10;            display: block;&#10;            border-radius: 50%;&#10;            border: 2px solid rgba(255, 255, 255, 0.6);&#10;            box-shadow: 0 0 8px rgba(255, 255, 255, 0.9);&#10;            animation: rise 12s linear infinite;&#10;        }&#10;&#10;        .bubbles span:nth-child(1) {&#10;            left: 5%;&#10;            width: 12px;&#10;            height: 12px;&#10;            animation-duration: 11s;&#10;        }&#10;&#10;        .bubbles span:nth-child(2) {&#10;            left: 15%;&#10;            width: 18px;&#10;            height: 18px;&#10;            animation-duration: 14s;&#10;        }&#10;&#10;        .bubbles span:nth-child(3) {&#10;            left: 22%;&#10;            width: 10px;&#10;            height: 10px;&#10;            animation-duration: 10s;&#10;        }&#10;&#10;        .bubbles span:nth-child(4) {&#10;            left: 30%;&#10;            width: 8px;&#10;            height: 8px;&#10;            animation-duration: 9s;&#10;        }&#10;&#10;        .bubbles span:nth-child(5) {&#10;            left: 38%;&#10;            width: 16px;&#10;            height: 16px;&#10;            animation-duration: 13s;&#10;        }&#10;&#10;        .bubbles span:nth-child(6) {&#10;            left: 45%;&#10;            width: 14px;&#10;            height: 14px;&#10;            animation-duration: 12s;&#10;        }&#10;&#10;        .bubbles span:nth-child(7) {&#10;            left: 50%;&#10;            width: 7px;&#10;            height: 7px;&#10;            animation-duration: 9s;&#10;        }&#10;&#10;        .bubbles span:nth-child(8) {&#10;            left: 58%;&#10;            width: 20px;&#10;            height: 20px;&#10;            animation-duration: 16s;&#10;        }&#10;&#10;        .bubbles span:nth-child(9) {&#10;            left: 63%;&#10;            width: 9px;&#10;            height: 9px;&#10;            animation-duration: 11s;&#10;        }&#10;&#10;        .bubbles span:nth-child(10) {&#10;            left: 70%;&#10;            width: 13px;&#10;            height: 13px;&#10;            animation-duration: 10s;&#10;        }&#10;&#10;        .bubbles span:nth-child(11) {&#10;            left: 75%;&#10;            width: 17px;&#10;            height: 17px;&#10;            animation-duration: 14s;&#10;        }&#10;&#10;        .bubbles span:nth-child(12) {&#10;            left: 80%;&#10;            width: 11px;&#10;            height: 11px;&#10;            animation-duration: 12s;&#10;        }&#10;&#10;        .bubbles span:nth-child(13) {&#10;            left: 85%;&#10;            width: 15px;&#10;            height: 15px;&#10;            animation-duration: 15s;&#10;        }&#10;&#10;        .bubbles span:nth-child(14) {&#10;            left: 88%;&#10;            width: 7px;&#10;            height: 7px;&#10;            animation-duration: 9s;&#10;        }&#10;&#10;        .bubbles span:nth-child(15) {&#10;            left: 92%;&#10;            width: 18px;&#10;            height: 18px;&#10;            animation-duration: 16s;&#10;        }&#10;&#10;        .bubbles span:nth-child(16) {&#10;            left: 96%;&#10;            width: 10px;&#10;            height: 10px;&#10;            animation-duration: 8s;&#10;        }&#10;&#10;        .bubbles span:nth-child(17) {&#10;            left: 50%;&#10;            width: 22px;&#10;            height: 22px;&#10;            animation-duration: 18s;&#10;        }&#10;&#10;        .bubbles span:nth-child(18) {&#10;            left: 32%;&#10;            width: 6px;&#10;            height: 6px;&#10;            animation-duration: 7s;&#10;        }&#10;&#10;        @keyframes rise {&#10;            0% {&#10;                transform: translateY(0) scale(.9);&#10;                opacity: 0;&#10;            }&#10;            10%, 80% {&#10;                opacity: 1;&#10;            }&#10;            100% {&#10;                transform: translateY(-120vh) scale(1.2);&#10;                opacity: 0;&#10;            }&#10;        }&#10;&#10;        .fishes .fish {&#10;            position: absolute;&#10;            width: 60px;&#10;            height: 28px;&#10;            border-radius: 999px;&#10;            box-shadow: 0 0 8px rgba(0, 0, 0, 0.25);&#10;            animation-timing-function: linear;&#10;            animation-iteration-count: infinite;&#10;        }&#10;&#10;        .fish::before {&#10;            content: &quot;&quot;;&#10;            position: absolute;&#10;            top: 50%;&#10;            transform: translateY(-50%);&#10;            width: 18px;&#10;            height: 20px;&#10;            border-radius: 4px;&#10;            left: var(--tail-x);&#10;            background: var(--tail-color);&#10;        }&#10;&#10;        .fish::after {&#10;            content: &quot;&quot;;&#10;            position: absolute;&#10;            top: 9px;&#10;            width: 6px;&#10;            height: 6px;&#10;            border-radius: 50%;&#10;            background: white;&#10;            box-shadow: 2px 0 0 #000 inset;&#10;            left: var(--eye-x);&#10;        }&#10;&#10;        @keyframes swim-right {&#10;            0% {&#10;                transform: translateX(-120px);&#10;            }&#10;            100% {&#10;                transform: translateX(110vw);&#10;            }&#10;        }&#10;&#10;        @keyframes swim-left {&#10;            0% {&#10;                transform: translateX(110vw);&#10;            }&#10;            100% {&#10;                transform: translateX(-120px);&#10;            }&#10;        }&#10;&#10;        header {&#10;            background: rgba(0, 0, 0, 0.18);&#10;            backdrop-filter: blur(6px);&#10;            padding: 12px 16px;&#10;            display: flex;&#10;            justify-content: space-between;&#10;            align-items: center;&#10;            position: sticky;&#10;            top: 0;&#10;            z-index: 10;&#10;            color: #ffffff;&#10;        }&#10;&#10;        .brand {&#10;            display: flex;&#10;            align-items: center;&#10;            gap: 10px;&#10;            min-width: 0;&#10;        }&#10;&#10;        .brand img {&#10;            width: 180px;&#10;            height: auto;&#10;            display: block;&#10;            filter: drop-shadow(0 10px 18px rgba(0, 0, 0, .55));&#10;            image-rendering: pixelated;&#10;        }&#10;&#10;        .userbox {&#10;            display: flex;&#10;            flex-direction: column;&#10;            align-items: flex-end;&#10;            gap: 8px;&#10;            margin-right: 6px; /* moved a bit left */&#10;        }&#10;&#10;        #user-info {&#10;            background: rgba(0, 0, 0, 0.22);&#10;            padding: 8px 12px;&#10;            border-radius: 12px;&#10;            font-weight: 700;&#10;            color: #ffffff;&#10;            border: 1px solid rgba(255, 255, 255, .16);&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .45);&#10;            white-space: nowrap;&#10;        }&#10;&#10;        #logoutBtn {&#10;            padding: 8px 12px;&#10;            border-radius: 12px;&#10;            border: 1px solid rgba(255, 255, 255, .16);&#10;            background: rgba(0, 0, 0, 0.22);&#10;            color: #ffffff;&#10;            font-weight: 800;&#10;            cursor: pointer;&#10;            font-family: inherit;&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .45);&#10;            transition: transform .12s, background .12s;&#10;        }&#10;&#10;        #logoutBtn:hover {&#10;            background: rgba(255, 255, 255, .12);&#10;            transform: translateY(-1px);&#10;        }&#10;&#10;        .header-right {&#10;            display: flex;&#10;            align-items: center;&#10;            gap: 14px;&#10;        }&#10;&#10;        .profile-link {&#10;            display: inline-flex;&#10;            align-items: center;&#10;            justify-content: center;&#10;            width: 84px;&#10;            height: 84px;&#10;            border-radius: 12px;&#10;            border: 1px solid rgba(255, 255, 255, .16);&#10;            background: rgba(0, 0, 0, 0.22);&#10;            text-decoration: none;&#10;            cursor: pointer;&#10;        }&#10;&#10;        .profile-link img {&#10;            width: 100%;&#10;            height: 100%;&#10;            object-fit: contain;&#10;            image-rendering: pixelated;&#10;        }&#10;&#10;        main {&#10;            max-width: 980px;&#10;            margin: 20px auto;&#10;            padding: 0 20px;&#10;        }&#10;&#10;        #rods {&#10;            display: grid;&#10;            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));&#10;            gap: 18px;&#10;        }&#10;&#10;        .rod {&#10;            display: flex;&#10;            gap: 18px;&#10;            background: url(&quot;../webResources/pixel_wood_bg.png&quot;);&#10;            background-size: cover;&#10;            background-position: center;&#10;            background-repeat: no-repeat;&#10;            border-radius: 16px;&#10;            padding: 16px;&#10;            box-shadow: 0 10px 28px rgba(0, 0, 0, .35), 0 0 0 1px rgba(255, 255, 255, .10) inset;&#10;            position: relative;&#10;            border: 1px solid rgba(255, 255, 255, .18);&#10;            transition: transform .15s, box-shadow .15s;&#10;            color: #ffffff;&#10;        }&#10;&#10;        .rod:hover {&#10;            transform: translateY(-3px);&#10;            box-shadow: 0 16px 36px rgba(0, 0, 0, .45), 0 0 0 1px rgba(255, 255, 255, .12) inset;&#10;        }&#10;&#10;        .rod img {&#10;            width: 84px;&#10;            height: 84px;&#10;            border-radius: 12px;&#10;            object-fit: cover;&#10;            box-shadow: 0 10px 18px rgba(0, 0, 0, .35);&#10;        }&#10;&#10;        .rod-info header {&#10;            font-size: 18px;&#10;            font-weight: 800;&#10;            color: #ffffff;&#10;            background: transparent;&#10;            padding: 0;&#10;            position: static;&#10;            backdrop-filter: none;&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .55);&#10;        }&#10;&#10;        .stats {&#10;            font-size: 12px;&#10;            color: var(--stats);&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .45);&#10;        }&#10;&#10;        .price {&#10;            font-weight: 800;&#10;            margin-top: 8px;&#10;            color: #ffffff;&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .55);&#10;        }&#10;&#10;        button.buy {&#10;            margin-top: 10px;&#10;            padding: 10px 16px;&#10;            background: var(--button);&#10;            color: white;&#10;            border: 1px solid rgba(255, 255, 255, .16);&#10;            border-radius: 10px;&#10;            font-weight: 800;&#10;            cursor: pointer;&#10;            transition: .15s;&#10;            font-family: inherit;&#10;        }&#10;&#10;        button.buy:hover {&#10;            background: var(--button-hover);&#10;            transform: scale(1.03);&#10;        }&#10;&#10;        .float-msg {&#10;            position: absolute;&#10;            left: 50%;&#10;            top: -5px;&#10;            transform: translateX(-50%);&#10;            padding: 10px 16px;&#10;            border-radius: 10px;&#10;            font-weight: 800;&#10;            background: rgba(0, 0, 0, 0.55);&#10;            animation: floatUp 1.2s ease forwards;&#10;            pointer-events: none;&#10;            box-shadow: 0 10px 26px rgba(0, 0, 0, 0.35);&#10;            z-index: 20;&#10;            color: #ffffff;&#10;            border: 1px solid rgba(255, 255, 255, .18);&#10;        }&#10;&#10;        .float-success {&#10;            border-color: rgba(42, 157, 111, 0.55);&#10;        }&#10;&#10;        .float-error {&#10;            border-color: rgba(200, 70, 70, 0.55);&#10;        }&#10;&#10;        @keyframes floatUp {&#10;            0% {&#10;                opacity: 0;&#10;                transform: translate(-50%, 10px) scale(0.9);&#10;            }&#10;            10% {&#10;                opacity: 1;&#10;            }&#10;            85% {&#10;                opacity: 1;&#10;                transform: translate(-50%, -20px) scale(1);&#10;            }&#10;            100% {&#10;                opacity: 0;&#10;                transform: translate(-50%, -40px);&#10;            }&#10;        }&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&#10;&lt;body&gt;&#10;&#10;&lt;div class=&quot;bg-anim&quot;&gt;&#10;    &lt;div class=&quot;bubbles&quot;&gt;&#10;        &lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&#10;        &lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&#10;        &lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;fishes&quot;&gt;&#10;        &lt;div class=&quot;fish f1&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f2&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f3&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f4&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f5&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f6&quot;&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;header&gt;&#10;    &lt;div class=&quot;brand&quot;&gt;&#10;        &lt;img src=&quot;../webResources/mainlogo.png&quot; alt=&quot;Fish &amp; Chill&quot;&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;header-right&quot;&gt;&#10;        &lt;div class=&quot;userbox&quot;&gt;&#10;            &lt;p id=&quot;user-info&quot;&gt;Loading...&lt;/p&gt;&#10;            &lt;button id=&quot;logoutBtn&quot; type=&quot;button&quot;&gt;Log Out&lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;a class=&quot;profile-link&quot; href=&quot;../myprofile&quot;&gt;&#10;            &lt;img src=&quot;../webResources/userprofile.png&quot; alt=&quot;My profile&quot;&gt;&#10;        &lt;/a&gt;&#10;    &lt;/div&gt;&#10;&lt;/header&gt;&#10;&#10;&lt;main&gt;&#10;    &lt;div id=&quot;rods&quot;&gt;&lt;/div&gt;&#10;&lt;/main&gt;&#10;&#10;&lt;script&gt;&#10;    function randomColor() {&#10;        const colors = [&#10;            [&quot;#ff6b6b&quot;, &quot;#ffb347&quot;],&#10;            [&quot;#6b8cff&quot;, &quot;#4661ff&quot;],&#10;            [&quot;#6bff95&quot;, &quot;#20c659&quot;],&#10;            [&quot;#ff6bf3&quot;, &quot;#d446ff&quot;],&#10;            [&quot;#ffd36b&quot;, &quot;#ffb200&quot;],&#10;            [&quot;#6bfff1&quot;, &quot;#2ed8cc&quot;],&#10;        ];&#10;        return colors[Math.floor(Math.random() * colors.length)];&#10;    }&#10;&#10;    function randomFishBehavior(fish, index) {&#10;        const top = 10 + index * 13 + Math.random() * 10;&#10;        fish.style.top = top + &quot;%&quot;;&#10;&#10;        const duration = 18 + Math.random() * 10;&#10;        fish.style.animationDuration = duration + &quot;s&quot;;&#10;&#10;        const goLeft = Math.random() &lt; 0.5;&#10;&#10;        if (goLeft) {&#10;            fish.style.animationName = &quot;swim-left&quot;;&#10;            fish.style.setProperty(&quot;--tail-x&quot;, &quot;calc(100% - 4px)&quot;);&#10;            fish.style.setProperty(&quot;--eye-x&quot;, &quot;8px&quot;);&#10;        } else {&#10;            fish.style.animationName = &quot;swim-right&quot;;&#10;            fish.style.setProperty(&quot;--tail-x&quot;, &quot;-18px&quot;);&#10;            fish.style.setProperty(&quot;--eye-x&quot;, &quot;calc(100% - 16px)&quot;);&#10;        }&#10;&#10;        const [c1, c2] = randomColor();&#10;        fish.style.background = `linear-gradient(90deg, ${c1}, ${c2})`;&#10;        fish.style.setProperty(&quot;--tail-color&quot;, c1);&#10;    }&#10;&#10;    document.addEventListener(&quot;DOMContentLoaded&quot;, () =&gt; {&#10;        document.querySelectorAll(&quot;.fish&quot;).forEach((fish, i) =&gt; {&#10;            randomFishBehavior(fish, i);&#10;        });&#10;    });&#10;&#10;    document.getElementById('logoutBtn').addEventListener('click', () =&gt; {&#10;        localStorage.removeItem('authToken');&#10;        window.location.href = '../index.html';&#10;    });&#10;&#10;    (function () {&#10;        const info = document.getElementById('user-info');&#10;        const rodsContainer = document.getElementById('rods');&#10;        const token = localStorage.getItem('authToken');&#10;&#10;        async function init() {&#10;            await loadMe();&#10;            await initShop();&#10;        }&#10;&#10;        if (!token) {&#10;            info.textContent = 'No session — Redirecting...';&#10;            setTimeout(() =&gt; window.location.href = '../index.html', 1200);&#10;        } else {&#10;            init();&#10;        }&#10;&#10;        async function loadMe() {&#10;            const res = await fetch('/api/me', {&#10;                headers: {'Authorization': token}&#10;            });&#10;&#10;            if (!res.ok) return;&#10;&#10;            const user = await res.json();&#10;            const name = user.username;&#10;            const coins = user.coins;&#10;&#10;            info.textContent = `${name} |  ${coins} coins`;&#10;        }&#10;&#10;        async function initShop() {&#10;            await loadRods();&#10;        }&#10;&#10;        async function loadRods() {&#10;            const res = await fetch('/api/catalog/fishing_rods', {&#10;                headers: {'Authorization': token}&#10;            });&#10;&#10;            if (!res.ok) return;&#10;&#10;            const rods = await res.json();&#10;            renderRods(rods);&#10;        }&#10;&#10;        function renderRods(rods) {&#10;            rodsContainer.innerHTML = '';&#10;            rods.forEach(rod =&gt; {&#10;                const el = document.createElement('div');&#10;                el.className = 'rod';&#10;&#10;                const imgSrc = rod.url;&#10;&#10;                el.innerHTML = `&#10;                  &lt;img src=&quot;${imgSrc}&quot; alt=&quot;${rod.name}&quot;&gt;&#10;                  &lt;div class=&quot;rod-info&quot;&gt;&#10;                    &lt;header&gt;${rod.name}&lt;/header&gt;&#10;                    &lt;div class=&quot;stats&quot;&gt;&#10;                      Speed: ${rod.speed} | Power: ${rod.power} | Rarity: ${rod.rarity}&lt;br&gt;&#10;                      Durability: ${rod.durability}&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;price&quot;&gt; ${rod.price} coins&lt;/div&gt;&#10;                    &lt;button class=&quot;buy&quot;&gt;Buy&lt;/button&gt;&#10;                  &lt;/div&gt;&#10;                `;&#10;&#10;                el.querySelector('.buy').addEventListener('click', () =&gt;&#10;                    buyFishingRod(rod.id, rod.name, rod.price, el)&#10;                );&#10;&#10;                rodsContainer.appendChild(el);&#10;            });&#10;        }&#10;&#10;        function showFloatMsg(parentEl, text, ok = true) {&#10;            parentEl.style.position = &quot;relative&quot;;&#10;&#10;            const msg = document.createElement(&quot;div&quot;);&#10;            msg.className = &quot;float-msg &quot; + (ok ? &quot;float-success&quot; : &quot;float-error&quot;);&#10;            msg.textContent = text;&#10;&#10;            parentEl.appendChild(msg);&#10;            setTimeout(() =&gt; msg.remove(), 1300);&#10;        }&#10;&#10;        async function buyFishingRod(id, name, price, parentEl) {&#10;            const res = await fetch(`/api/shop/fishing_rods/${encodeURIComponent(name)}/buy`, {&#10;                method: 'POST',&#10;                headers: {'Authorization': token}&#10;            });&#10;&#10;            if (!res.ok) {&#10;                const text = await res.text();&#10;                showFloatMsg(parentEl, &quot;❌ &quot; + text, false);&#10;                return;&#10;            }&#10;&#10;            showFloatMsg(parentEl, `✅ You bought ${name} for ${price} coins!`, true);&#10;            await loadMe();&#10;        }&#10;&#10;    })();&#10;&lt;/script&gt;&#10;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;en&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;/&gt;&#10;    &lt;title&gt;Fish &amp; Chill Shop&lt;/title&gt;&#10;&#10;    &lt;style&gt;&#10;        @font-face {&#10;            font-family: &quot;PixelFont&quot;;&#10;            src: url(&quot;../font/pixel_font.ttf&quot;) format(&quot;truetype&quot;);&#10;            font-weight: 400;&#10;            font-style: normal;&#10;            font-display: swap;&#10;        }&#10;&#10;        :root {&#10;            --ink: #ffffff;&#10;            --muted: rgba(255, 255, 255, .88);&#10;            --stats: rgba(255, 255, 255, .82);&#10;&#10;            --buy: #2a86c7;&#10;            --buy-hover: #2476ad;&#10;&#10;            --equip: #2a9d6f;&#10;            --equip-hover: #23865f;&#10;&#10;            --equipped: rgba(255, 255, 255, 0.18);&#10;&#10;            --rarity-1: #3bd671; /* green */&#10;            --rarity-2: #3b82f6; /* blue */&#10;            --rarity-3: #a855f7; /* purple */&#10;            --rarity-4: #ef4444; /* red */&#10;            --rarity-5: #ffffff; /* bright white */&#10;        }&#10;&#10;        * {&#10;            box-sizing: border-box;&#10;            user-select: none;&#10;        }&#10;&#10;        body {&#10;            margin: 0;&#10;            font-family: &quot;PixelFont&quot;, system-ui, -apple-system, &quot;Segoe UI&quot;, Roboto, Arial, sans-serif;&#10;            background: radial-gradient(1200px 800px at 20% -10%, rgba(5, 25, 50, 0.6), transparent 70%),&#10;            radial-gradient(1200px 800px at 120% 0%, rgba(10, 40, 70, 0.6), transparent 70%),&#10;            #0b2239;&#10;            color: var(--ink);&#10;            overflow-x: hidden;&#10;        }&#10;&#10;        .bg-anim {&#10;            position: fixed;&#10;            inset: 0;&#10;            overflow: hidden;&#10;            pointer-events: none;&#10;            z-index: -1;&#10;        }&#10;&#10;        .bubbles span {&#10;            position: absolute;&#10;            bottom: -80px;&#10;            display: block;&#10;            border-radius: 50%;&#10;            border: 2px solid rgba(255, 255, 255, 0.6);&#10;            box-shadow: 0 0 8px rgba(255, 255, 255, 0.9);&#10;            animation: rise 12s linear infinite;&#10;        }&#10;&#10;        .bubbles span:nth-child(1) {&#10;            left: 5%;&#10;            width: 12px;&#10;            height: 12px;&#10;            animation-duration: 11s;&#10;        }&#10;&#10;        .bubbles span:nth-child(2) {&#10;            left: 15%;&#10;            width: 18px;&#10;            height: 18px;&#10;            animation-duration: 14s;&#10;        }&#10;&#10;        .bubbles span:nth-child(3) {&#10;            left: 22%;&#10;            width: 10px;&#10;            height: 10px;&#10;            animation-duration: 10s;&#10;        }&#10;&#10;        .bubbles span:nth-child(4) {&#10;            left: 30%;&#10;            width: 8px;&#10;            height: 8px;&#10;            animation-duration: 9s;&#10;        }&#10;&#10;        .bubbles span:nth-child(5) {&#10;            left: 38%;&#10;            width: 16px;&#10;            height: 16px;&#10;            animation-duration: 13s;&#10;        }&#10;&#10;        .bubbles span:nth-child(6) {&#10;            left: 45%;&#10;            width: 14px;&#10;            height: 14px;&#10;            animation-duration: 12s;&#10;        }&#10;&#10;        .bubbles span:nth-child(7) {&#10;            left: 50%;&#10;            width: 7px;&#10;            height: 7px;&#10;            animation-duration: 9s;&#10;        }&#10;&#10;        .bubbles span:nth-child(8) {&#10;            left: 58%;&#10;            width: 20px;&#10;            height: 20px;&#10;            animation-duration: 16s;&#10;        }&#10;&#10;        .bubbles span:nth-child(9) {&#10;            left: 63%;&#10;            width: 9px;&#10;            height: 9px;&#10;            animation-duration: 11s;&#10;        }&#10;&#10;        .bubbles span:nth-child(10) {&#10;            left: 70%;&#10;            width: 13px;&#10;            height: 13px;&#10;            animation-duration: 10s;&#10;        }&#10;&#10;        .bubbles span:nth-child(11) {&#10;            left: 75%;&#10;            width: 17px;&#10;            height: 17px;&#10;            animation-duration: 14s;&#10;        }&#10;&#10;        .bubbles span:nth-child(12) {&#10;            left: 80%;&#10;            width: 11px;&#10;            height: 11px;&#10;            animation-duration: 12s;&#10;        }&#10;&#10;        .bubbles span:nth-child(13) {&#10;            left: 85%;&#10;            width: 15px;&#10;            height: 15px;&#10;            animation-duration: 15s;&#10;        }&#10;&#10;        .bubbles span:nth-child(14) {&#10;            left: 88%;&#10;            width: 7px;&#10;            height: 7px;&#10;            animation-duration: 9s;&#10;        }&#10;&#10;        .bubbles span:nth-child(15) {&#10;            left: 92%;&#10;            width: 18px;&#10;            height: 18px;&#10;            animation-duration: 16s;&#10;        }&#10;&#10;        .bubbles span:nth-child(16) {&#10;            left: 96%;&#10;            width: 10px;&#10;            height: 10px;&#10;            animation-duration: 8s;&#10;        }&#10;&#10;        .bubbles span:nth-child(17) {&#10;            left: 50%;&#10;            width: 22px;&#10;            height: 22px;&#10;            animation-duration: 18s;&#10;        }&#10;&#10;        .bubbles span:nth-child(18) {&#10;            left: 32%;&#10;            width: 6px;&#10;            height: 6px;&#10;            animation-duration: 7s;&#10;        }&#10;&#10;        @keyframes rise {&#10;            0% {&#10;                transform: translateY(0) scale(.9);&#10;                opacity: 0;&#10;            }&#10;            10%, 80% {&#10;                opacity: 1;&#10;            }&#10;            100% {&#10;                transform: translateY(-120vh) scale(1.2);&#10;                opacity: 0;&#10;            }&#10;        }&#10;&#10;        .fishes .fish {&#10;            position: absolute;&#10;            width: 60px;&#10;            height: 28px;&#10;            border-radius: 999px;&#10;            box-shadow: 0 0 8px rgba(0, 0, 0, 0.25);&#10;            animation-timing-function: linear;&#10;            animation-iteration-count: infinite;&#10;        }&#10;&#10;        .fish::before {&#10;            content: &quot;&quot;;&#10;            position: absolute;&#10;            top: 50%;&#10;            transform: translateY(-50%);&#10;            width: 18px;&#10;            height: 20px;&#10;            border-radius: 4px;&#10;            left: var(--tail-x);&#10;            background: var(--tail-color);&#10;        }&#10;&#10;        .fish::after {&#10;            content: &quot;&quot;;&#10;            position: absolute;&#10;            top: 9px;&#10;            width: 6px;&#10;            height: 6px;&#10;            border-radius: 50%;&#10;            background: white;&#10;            box-shadow: 2px 0 0 #000 inset;&#10;            left: var(--eye-x);&#10;        }&#10;&#10;        @keyframes swim-right {&#10;            0% {&#10;                transform: translateX(-120px);&#10;            }&#10;            100% {&#10;                transform: translateX(110vw);&#10;            }&#10;        }&#10;&#10;        @keyframes swim-left {&#10;            0% {&#10;                transform: translateX(110vw);&#10;            }&#10;            100% {&#10;                transform: translateX(-120px);&#10;            }&#10;        }&#10;&#10;        header {&#10;            background: rgba(0, 0, 0, 0.18);&#10;            backdrop-filter: blur(6px);&#10;            padding: 12px 16px;&#10;            display: flex;&#10;            justify-content: space-between;&#10;            align-items: center;&#10;            position: sticky;&#10;            top: 0;&#10;            z-index: 10;&#10;            color: #ffffff;&#10;        }&#10;&#10;        .brand {&#10;            display: flex;&#10;            align-items: center;&#10;            gap: 10px;&#10;            min-width: 0;&#10;        }&#10;&#10;        .brand img {&#10;            width: 180px;&#10;            height: auto;&#10;            display: block;&#10;            filter: drop-shadow(0 10px 18px rgba(0, 0, 0, .55));&#10;            image-rendering: pixelated;&#10;        }&#10;&#10;        .userbox {&#10;            display: flex;&#10;            flex-direction: column;&#10;            align-items: flex-end;&#10;            gap: 8px;&#10;            margin-right: 6px; /* moved a bit left */&#10;        }&#10;&#10;        #user-info {&#10;            background: rgba(0, 0, 0, 0.22);&#10;            padding: 8px 12px;&#10;            border-radius: 12px;&#10;            font-weight: 700;&#10;            color: #ffffff;&#10;            border: 1px solid rgba(255, 255, 255, .16);&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .45);&#10;            white-space: nowrap;&#10;        }&#10;&#10;        #logoutBtn {&#10;            padding: 8px 12px;&#10;            border-radius: 12px;&#10;            border: 1px solid rgba(255, 255, 255, .16);&#10;            background: rgba(0, 0, 0, 0.22);&#10;            color: #ffffff;&#10;            font-weight: 800;&#10;            cursor: pointer;&#10;            font-family: inherit;&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .45);&#10;            transition: transform .12s, background .12s;&#10;        }&#10;&#10;        #logoutBtn:hover {&#10;            background: rgba(255, 255, 255, .12);&#10;            transform: translateY(-1px);&#10;        }&#10;&#10;        .header-right {&#10;            display: flex;&#10;            align-items: center;&#10;            gap: 14px;&#10;        }&#10;&#10;        .profile-link {&#10;            display: inline-flex;&#10;            align-items: center;&#10;            justify-content: center;&#10;            width: 84px;&#10;            height: 84px;&#10;            border-radius: 12px;&#10;            border: 1px solid rgba(255, 255, 255, .16);&#10;            background: rgba(0, 0, 0, 0.22);&#10;            text-decoration: none;&#10;            cursor: pointer;&#10;        }&#10;&#10;        .profile-link img {&#10;            width: 100%;&#10;            height: 100%;&#10;            object-fit: contain;&#10;            image-rendering: pixelated;&#10;        }&#10;&#10;        main {&#10;            max-width: 980px;&#10;            margin: 20px auto;&#10;            padding: 0 20px;&#10;        }&#10;&#10;        #rods {&#10;            display: grid;&#10;            grid-template-columns: repeat(2, minmax(0, 1fr));&#10;            gap: 18px;&#10;        }&#10;&#10;        @media (max-width: 720px) {&#10;            #rods {&#10;                grid-template-columns: 1fr;&#10;            }&#10;        }&#10;&#10;        .rod {&#10;            display: grid;&#10;            grid-template-columns: 140px 1fr;&#10;            gap: 16px;&#10;            align-items: stretch;&#10;            background: url(&quot;../webResources/pixel_wood_bg.png&quot;);&#10;            background-size: cover;&#10;            background-position: center;&#10;            background-repeat: no-repeat;&#10;            border-radius: 16px;&#10;            padding: 18px;&#10;            box-shadow: 0 10px 28px rgba(0, 0, 0, .35), 0 0 0 1px rgba(255, 255, 255, .10) inset;&#10;            position: relative;&#10;            border: 2px solid rgba(255, 255, 255, .18);&#10;            transition: transform .15s, box-shadow .15s;&#10;            color: #ffffff;&#10;            min-height: 240px;&#10;        }&#10;&#10;        .rod-left {&#10;            display: flex;&#10;            flex-direction: column;&#10;            gap: 8px;&#10;            align-items: stretch;&#10;            height: 100%;&#10;        }&#10;&#10;        .rod-image {&#10;            width: 100%;&#10;            height: 160px;&#10;            border-radius: 12px;&#10;            object-fit: contain;&#10;            object-position: center;&#10;            image-rendering: pixelated;&#10;            background: radial-gradient(circle at center, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.2) 40%, transparent 75%);&#10;            border: none;&#10;            box-shadow: none;&#10;        }&#10;&#10;        /* Image background with radial gradient based on rarity color */&#10;        .rod.rarity-1 .rod-image {&#10;            background: radial-gradient(circle at center, rgba(59, 214, 113, 0.6) 0%, rgba(59, 214, 113, 0.25) 40%, transparent 75%);&#10;            border: none;&#10;            box-shadow: none;&#10;        }&#10;        .rod.rarity-2 .rod-image {&#10;            background: radial-gradient(circle at center, rgba(59, 130, 246, 0.6) 0%, rgba(59, 130, 246, 0.25) 40%, transparent 75%);&#10;            border: none;&#10;            box-shadow: none;&#10;        }&#10;        .rod.rarity-3 .rod-image {&#10;            background: radial-gradient(circle at center, rgba(168, 85, 247, 0.6) 0%, rgba(168, 85, 247, 0.25) 40%, transparent 75%);&#10;            border: none;&#10;            box-shadow: none;&#10;        }&#10;        .rod.rarity-4 .rod-image {&#10;            background: radial-gradient(circle at center, rgba(255, 150, 150, 0.6) 0%, rgba(255, 150, 150, 0.25) 40%, transparent 75%);&#10;            border: none;&#10;            box-shadow: none;&#10;        }&#10;&#10;        .rod-footer {&#10;            margin-top: auto;&#10;            display: block;&#10;        }&#10;&#10;        .rod-footer button.buy {&#10;            width: 100%;&#10;            padding: 8px 12px;&#10;            font-size: 14px;&#10;            line-height: 1.1;&#10;            white-space: nowrap;&#10;            text-overflow: ellipsis;&#10;            overflow: hidden;&#10;        }&#10;&#10;        /* Right column: name at top, stats in middle, coins at bottom */&#10;        .rod-right {&#10;            display: flex;&#10;            flex-direction: column;&#10;            justify-content: space-between;&#10;            height: 100%;&#10;            text-align: center;&#10;            background: rgba(0, 0, 0, 0.25);&#10;            padding: 12px;&#10;            border-radius: 10px;&#10;            backdrop-filter: blur(1px);&#10;            border: 1px solid rgba(255, 255, 255, 0.15);&#10;        }&#10;&#10;        /* Rarity-based right column background */&#10;        .rod.rarity-1 .rod-right {&#10;            background: rgba(59, 214, 113, 0.12);&#10;            border-color: rgba(59, 214, 113, 0.3);&#10;        }&#10;        .rod.rarity-2 .rod-right {&#10;            background: rgba(59, 130, 246, 0.12);&#10;            border-color: rgba(59, 130, 246, 0.3);&#10;        }&#10;        .rod.rarity-3 .rod-right {&#10;            background: rgba(168, 85, 247, 0.12);&#10;            border-color: rgba(168, 85, 247, 0.3);&#10;        }&#10;        .rod.rarity-4 .rod-right {&#10;            background: rgba(255, 120, 120, 0.18);&#10;            border-color: rgba(255, 150, 150, 0.4);&#10;        }&#10;        .rod.rarity-5 .rod-right {&#10;            background: rgba(255, 255, 255, 0.08);&#10;            border-color: rgba(255, 255, 255, 0.4);&#10;            animation: rainbowBg 3s linear infinite;&#10;        }&#10;&#10;        .rod.rarity-5 .rod-image {&#10;            border: none;&#10;            box-shadow: none;&#10;            animation: rainbowImg 3s linear infinite;&#10;        }&#10;&#10;        @keyframes rainbowBg {&#10;            0% { background: rgba(255, 100, 100, 0.2); border-color: rgba(255, 100, 100, 0.5); }&#10;            16% { background: rgba(255, 200, 100, 0.2); border-color: rgba(255, 200, 100, 0.5); }&#10;            33% { background: rgba(200, 255, 100, 0.2); border-color: rgba(200, 255, 100, 0.5); }&#10;            50% { background: rgba(100, 255, 200, 0.2); border-color: rgba(100, 255, 200, 0.5); }&#10;            66% { background: rgba(100, 200, 255, 0.2); border-color: rgba(100, 200, 255, 0.5); }&#10;            83% { background: rgba(200, 100, 255, 0.2); border-color: rgba(200, 100, 255, 0.5); }&#10;            100% { background: rgba(255, 100, 100, 0.2); border-color: rgba(255, 100, 100, 0.5); }&#10;        }&#10;&#10;        @keyframes rainbowImg {&#10;            0% { background: radial-gradient(circle at center, rgba(255, 100, 100, 0.6) 0%, rgba(255, 100, 100, 0.25) 40%, transparent 75%); }&#10;            16% { background: radial-gradient(circle at center, rgba(255, 200, 100, 0.6) 0%, rgba(255, 200, 100, 0.25) 40%, transparent 75%); }&#10;            33% { background: radial-gradient(circle at center, rgba(200, 255, 100, 0.6) 0%, rgba(200, 255, 100, 0.25) 40%, transparent 75%); }&#10;            50% { background: radial-gradient(circle at center, rgba(100, 255, 200, 0.6) 0%, rgba(100, 255, 200, 0.25) 40%, transparent 75%); }&#10;            66% { background: radial-gradient(circle at center, rgba(100, 200, 255, 0.6) 0%, rgba(100, 200, 255, 0.25) 40%, transparent 75%); }&#10;            83% { background: radial-gradient(circle at center, rgba(200, 100, 255, 0.6) 0%, rgba(200, 100, 255, 0.25) 40%, transparent 75%); }&#10;            100% { background: radial-gradient(circle at center, rgba(255, 100, 100, 0.6) 0%, rgba(255, 100, 100, 0.25) 40%, transparent 75%); }&#10;        }&#10;&#10;        .rod-info {&#10;            display: flex;&#10;            flex-direction: column;&#10;            justify-content: space-between;&#10;            height: 100%;&#10;            text-align: center;&#10;        }&#10;&#10;        .stats {&#10;            display: grid;&#10;            gap: 8px;&#10;            font-size: 15px;&#10;            color: var(--stats);&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .45);&#10;            text-align: center;&#10;            margin: auto 0;&#10;        }&#10;&#10;        .rod-right .price {&#10;            font-weight: 800;&#10;            font-size: 15px;&#10;            color: #ffffff;&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .55);&#10;            margin: 0;&#10;            text-align: center;&#10;        }&#10;&#10;        /* Buttons */&#10;        button.buy {&#10;            margin-top: 0;&#10;            padding: 8px 12px;&#10;            background: var(--buy);&#10;            color: white;&#10;            border: 1px solid rgba(255, 255, 255, .16);&#10;            border-radius: 10px;&#10;            font-weight: 800;&#10;            cursor: pointer;&#10;            transition: .15s;&#10;            font-family: inherit;&#10;            font-size: 14px;&#10;        }&#10;&#10;        button.buy:hover {&#10;            background: var(--buy-hover);&#10;            transform: scale(1.03);&#10;        }&#10;&#10;        button.buy.equip {&#10;            background: var(--equip);&#10;        }&#10;&#10;        button.buy.equip:hover {&#10;            background: var(--equip-hover);&#10;        }&#10;&#10;        button.buy.equipped {&#10;            background: var(--equipped);&#10;            color: rgba(255, 255, 255, 0.9);&#10;        }&#10;&#10;        button.buy:disabled {&#10;            opacity: 0.75;&#10;            cursor: not-allowed;&#10;            transform: none;&#10;        }&#10;&#10;        /* Rarity header glow */&#10;        .rod-info header {&#10;            font-size: 20px;&#10;            font-weight: 800;&#10;            color: #ffffff;&#10;            background: transparent;&#10;            padding: 0;&#10;            border-radius: 0;&#10;            position: relative;&#10;            backdrop-filter: none;&#10;            text-shadow: 0 2px 10px rgba(0, 0, 0, .55);&#10;            margin: 0;&#10;            text-align: center;&#10;            display: block;&#10;            border: none;&#10;        }&#10;&#10;        /* Rarity-based header text color + animated glow */&#10;        .rod.rarity-1 .rod-info header {&#10;            color: var(--rarity-1); /* green */&#10;            animation: glowPulse1 2.5s ease-in-out infinite;&#10;        }&#10;        .rod.rarity-2 .rod-info header {&#10;            color: var(--rarity-2); /* blue */&#10;            animation: glowPulse2 2.5s ease-in-out infinite;&#10;        }&#10;        .rod.rarity-3 .rod-info header {&#10;            color: var(--rarity-3); /* purple */&#10;            animation: glowPulse3 2.5s ease-in-out infinite;&#10;        }&#10;        .rod.rarity-4 .rod-info header {&#10;            color: #ff9999; /* lighter red */&#10;            animation: glowPulse4 2.5s ease-in-out infinite;&#10;        }&#10;        .rod.rarity-5 .rod-info header {&#10;            color: var(--rarity-5); /* white */&#10;            animation: glowPulse5Legendary 1.8s ease-in-out infinite;&#10;            text-shadow:&#10;                0 0 10px rgba(255, 255, 255, 0.7),&#10;                0 0 25px rgba(255, 255, 255, 0.5),&#10;                0 0 50px rgba(255, 255, 255, 0.3);&#10;        }&#10;&#10;        @keyframes glowPulse1 {&#10;            0%, 100% { text-shadow: 0 0 6px rgba(59, 214, 113, 0.5), 0 0 12px rgba(59, 214, 113, 0.3); }&#10;            50% { text-shadow: 0 0 14px rgba(59, 214, 113, 0.8), 0 0 28px rgba(59, 214, 113, 0.5); }&#10;        }&#10;        @keyframes glowPulse2 {&#10;            0%, 100% { text-shadow: 0 0 6px rgba(59, 130, 246, 0.5), 0 0 12px rgba(59, 130, 246, 0.3); }&#10;            50% { text-shadow: 0 0 14px rgba(59, 130, 246, 0.8), 0 0 28px rgba(59, 130, 246, 0.5); }&#10;        }&#10;        @keyframes glowPulse3 {&#10;            0%, 100% { text-shadow: 0 0 6px rgba(168, 85, 247, 0.5), 0 0 12px rgba(168, 85, 247, 0.3); }&#10;            50% { text-shadow: 0 0 14px rgba(168, 85, 247, 0.8), 0 0 28px rgba(168, 85, 247, 0.5); }&#10;        }&#10;        @keyframes glowPulse4 {&#10;            0%, 100% { text-shadow: 0 0 6px rgba(255, 150, 150, 0.5), 0 0 12px rgba(255, 150, 150, 0.3); }&#10;            50% { text-shadow: 0 0 14px rgba(255, 150, 150, 0.8), 0 0 28px rgba(255, 150, 150, 0.5); }&#10;        }&#10;        @keyframes glowPulse5Legendary {&#10;            0%, 100% {&#10;                text-shadow:&#10;                    0 0 10px rgba(255, 255, 255, 0.7),&#10;                    0 0 25px rgba(255, 255, 255, 0.5),&#10;                    0 0 50px rgba(255, 255, 255, 0.3);&#10;            }&#10;            50% {&#10;                text-shadow:&#10;                    0 0 20px rgba(255, 255, 255, 1),&#10;                    0 0 50px rgba(255, 255, 255, 1),&#10;                    0 0 100px rgba(255, 255, 255, 0.8),&#10;                    0 0 150px rgba(255, 255, 255, 0.5);&#10;            }&#10;        }&#10;&#10;        .float-msg {&#10;            position: absolute;&#10;            left: 50%;&#10;            top: -5px;&#10;            transform: translateX(-50%);&#10;            padding: 10px 16px;&#10;            border-radius: 10px;&#10;            font-weight: 800;&#10;            background: rgba(0, 0, 0, 0.55);&#10;            animation: floatUp 1.2s ease forwards;&#10;            pointer-events: none;&#10;            box-shadow: 0 10px 26px rgba(0, 0, 0, 0.35);&#10;            z-index: 20;&#10;            color: #ffffff;&#10;            border: 1px solid rgba(255, 255, 255, .18);&#10;        }&#10;&#10;        .float-success {&#10;            border-color: rgba(42, 157, 111, 0.55);&#10;        }&#10;&#10;        .float-error {&#10;            border-color: rgba(200, 70, 70, 0.55);&#10;        }&#10;&#10;        @keyframes floatUp {&#10;            0% {&#10;                opacity: 0;&#10;                transform: translate(-50%, 10px) scale(0.9);&#10;            }&#10;            10% {&#10;                opacity: 1;&#10;            }&#10;            85% {&#10;                opacity: 1;&#10;                transform: translate(-50%, -20px) scale(1);&#10;            }&#10;            100% {&#10;                opacity: 0;&#10;                transform: translate(-50%, -40px);&#10;            }&#10;        }&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&#10;&lt;body&gt;&#10;&#10;&lt;div class=&quot;bg-anim&quot;&gt;&#10;    &lt;div class=&quot;bubbles&quot;&gt;&#10;        &lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&#10;        &lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&#10;        &lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;fishes&quot;&gt;&#10;        &lt;div class=&quot;fish f1&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f2&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f3&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f4&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f5&quot;&gt;&lt;/div&gt;&#10;        &lt;div class=&quot;fish f6&quot;&gt;&lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;&lt;header&gt;&#10;    &lt;div class=&quot;brand&quot;&gt;&#10;        &lt;img src=&quot;../webResources/mainlogo.png&quot; alt=&quot;Fish &amp; Chill&quot;&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;div class=&quot;header-right&quot;&gt;&#10;        &lt;div class=&quot;userbox&quot;&gt;&#10;            &lt;p id=&quot;user-info&quot;&gt;Loading...&lt;/p&gt;&#10;            &lt;button id=&quot;logoutBtn&quot; type=&quot;button&quot;&gt;Log Out&lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;a class=&quot;profile-link&quot; href=&quot;../myprofile&quot;&gt;&#10;            &lt;img src=&quot;../webResources/userprofile.png&quot; alt=&quot;My profile&quot;&gt;&#10;        &lt;/a&gt;&#10;    &lt;/div&gt;&#10;&lt;/header&gt;&#10;&#10;&lt;main&gt;&#10;    &lt;div id=&quot;rods&quot;&gt;&lt;/div&gt;&#10;&lt;/main&gt;&#10;&#10;&lt;script&gt;&#10;    function randomColor() {&#10;        const colors = [&#10;            [&quot;#ff6b6b&quot;, &quot;#ffb347&quot;],&#10;            [&quot;#6b8cff&quot;, &quot;#4661ff&quot;],&#10;            [&quot;#6bff95&quot;, &quot;#20c659&quot;],&#10;            [&quot;#ff6bf3&quot;, &quot;#d446ff&quot;],&#10;            [&quot;#ffd36b&quot;, &quot;#ffb200&quot;],&#10;            [&quot;#6bfff1&quot;, &quot;#2ed8cc&quot;],&#10;        ];&#10;        return colors[Math.floor(Math.random() * colors.length)];&#10;    }&#10;&#10;    function randomFishBehavior(fish, index) {&#10;        const top = 10 + index * 13 + Math.random() * 10;&#10;        fish.style.top = top + &quot;%&quot;;&#10;&#10;        const duration = 18 + Math.random() * 10;&#10;        fish.style.animationDuration = duration + &quot;s&quot;;&#10;&#10;        const goLeft = Math.random() &lt; 0.5;&#10;&#10;        if (goLeft) {&#10;            fish.style.animationName = &quot;swim-left&quot;;&#10;            fish.style.setProperty(&quot;--tail-x&quot;, &quot;calc(100% - 4px)&quot;);&#10;            fish.style.setProperty(&quot;--eye-x&quot;, &quot;8px&quot;);&#10;        } else {&#10;            fish.style.animationName = &quot;swim-right&quot;;&#10;            fish.style.setProperty(&quot;--tail-x&quot;, &quot;-18px&quot;);&#10;            fish.style.setProperty(&quot;--eye-x&quot;, &quot;calc(100% - 16px)&quot;);&#10;        }&#10;&#10;        const [c1, c2] = randomColor();&#10;        fish.style.background = `linear-gradient(90deg, ${c1}, ${c2})`;&#10;        fish.style.setProperty(&quot;--tail-color&quot;, c1);&#10;    }&#10;&#10;    document.addEventListener(&quot;DOMContentLoaded&quot;, () =&gt; {&#10;        document.querySelectorAll(&quot;.fish&quot;).forEach((fish, i) =&gt; {&#10;            randomFishBehavior(fish, i);&#10;        });&#10;    });&#10;&#10;    document.getElementById('logoutBtn').addEventListener('click', () =&gt; {&#10;        localStorage.removeItem('authToken');&#10;        window.location.href = '../index.html';&#10;    });&#10;&#10;    (function () {&#10;        const info = document.getElementById('user-info');&#10;        const rodsContainer = document.getElementById('rods');&#10;        const token = localStorage.getItem('authToken');&#10;&#10;        // Cache of state used to render the shop&#10;        let catalogRods = [];&#10;        let ownedRodNames = new Set();&#10;        let equippedRodName = null;&#10;&#10;        async function init() {&#10;            await refreshUserState();&#10;            await refreshRodsState();&#10;            renderRods();&#10;        }&#10;&#10;        if (!token) {&#10;            info.textContent = 'No session — Redirecting...';&#10;            setTimeout(() =&gt; window.location.href = '../index.html', 1200);&#10;        } else {&#10;            init();&#10;        }&#10;&#10;        async function refreshUserState() {&#10;            const res = await fetch('/api/me', {&#10;                headers: {'Authorization': token}&#10;            });&#10;&#10;            if (!res.ok) return;&#10;&#10;            const user = await res.json();&#10;            const name = user.username;&#10;            const coins = user.coins;&#10;&#10;            // MeService dto has `equippedFishingRod` (string rod name)&#10;            equippedRodName = user.equippedFishingRod || null;&#10;&#10;            info.textContent = `${name} |  ${coins} coins`;&#10;        }&#10;&#10;        async function refreshRodsState() {&#10;            const [catalogRes, ownedRes] = await Promise.all([&#10;                fetch('/api/catalog/fishing_rods', { headers: {'Authorization': token} }),&#10;                fetch('/api/me/owned_fishing_rods', { headers: {'Authorization': token} })&#10;            ]);&#10;&#10;            if (catalogRes.ok) {&#10;                catalogRods = await catalogRes.json();&#10;            } else {&#10;                catalogRods = [];&#10;            }&#10;&#10;            if (ownedRes.ok) {&#10;                const owned = await ownedRes.json();&#10;                ownedRodNames = new Set((owned || []).map(r =&gt; r.name));&#10;            } else {&#10;                ownedRodNames = new Set();&#10;            }&#10;        }&#10;&#10;        function showFloatMsg(parentEl, text, ok = true) {&#10;            parentEl.style.position = &quot;relative&quot;;&#10;&#10;            const msg = document.createElement(&quot;div&quot;);&#10;            msg.className = &quot;float-msg &quot; + (ok ? &quot;float-success&quot; : &quot;float-error&quot;);&#10;            msg.textContent = text;&#10;&#10;            parentEl.appendChild(msg);&#10;            setTimeout(() =&gt; msg.remove(), 1300);&#10;        }&#10;&#10;        function renderRods() {&#10;            rodsContainer.innerHTML = '';&#10;&#10;            catalogRods.forEach(rod =&gt; {&#10;                const el = document.createElement('div');&#10;                const rarity = Number(rod.rarity);&#10;                const rarityClass = Number.isFinite(rarity) ? `rarity-${rarity}` : '';&#10;&#10;                el.className = `rod ${rarityClass}`.trim();&#10;&#10;                const imgSrc = rod.url;&#10;                const isOwned = ownedRodNames.has(rod.name);&#10;                const isEquipped = !!equippedRodName &amp;&amp; rod.name === equippedRodName;&#10;&#10;                let buttonLabel = 'Buy';&#10;                let buttonDisabled = false;&#10;                let buttonClass = 'buy';&#10;&#10;                if (isOwned &amp;&amp; isEquipped) {&#10;                    buttonLabel = 'Equipped';&#10;                    buttonDisabled = true;&#10;                    buttonClass = 'buy equipped';&#10;                } else if (isOwned) {&#10;                    buttonLabel = 'Equip';&#10;                    buttonClass = 'buy equip';&#10;                }&#10;&#10;                const speed = Number.isFinite(Number(rod.speed)) ? Number(rod.speed).toFixed(1) : rod.speed;&#10;                const power = Number.isFinite(Number(rod.power)) ? Number(rod.power).toFixed(1) : rod.power;&#10;&#10;                // Hide coins if already owned&#10;                const priceHtml = isOwned ? '' : `&lt;div class=&quot;price&quot;&gt; ${rod.price} coins&lt;/div&gt;`;&#10;&#10;                el.innerHTML = `&#10;                  &lt;div class=&quot;rod-left&quot;&gt;&#10;                    &lt;img class=&quot;rod-image&quot; src=&quot;${imgSrc}&quot; alt=&quot;${rod.name}&quot;&gt;&#10;                    &lt;div class=&quot;rod-footer&quot;&gt;&#10;                      &lt;button class=&quot;${buttonClass}&quot; ${buttonDisabled ? 'disabled' : ''}&gt;${buttonLabel}&lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;&#10;                  &lt;div class=&quot;rod-right&quot;&gt;&#10;                    &lt;div class=&quot;rod-info&quot;&gt;&#10;                      &lt;header&gt;${rod.name}&lt;/header&gt;&#10;                      &lt;div class=&quot;stats&quot;&gt;&#10;                        &lt;div&gt;Power: ${power}&lt;/div&gt;&#10;                        &lt;div&gt;Speed: ${speed}&lt;/div&gt;&#10;                        &lt;div&gt;Durability: ${rod.durability}&lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                      ${priceHtml}&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;                `;&#10;&#10;                const btn = el.querySelector('button');&#10;                btn.addEventListener('click', async () =&gt; {&#10;                    if (btn.disabled) return;&#10;&#10;                    // Don’t allow buying already-owned rods. Owned =&gt; Equip.&#10;                    if (ownedRodNames.has(rod.name)) {&#10;                        await equipFishingRod(rod.name, el);&#10;                        return;&#10;                    }&#10;&#10;                    await buyFishingRod(rod.name, rod.price, el);&#10;                });&#10;&#10;                rodsContainer.appendChild(el);&#10;            });&#10;        }&#10;&#10;        async function buyFishingRod(name, price, parentEl) {&#10;            const res = await fetch(`/api/shop/fishing_rods/${encodeURIComponent(name)}/buy`, {&#10;                method: 'POST',&#10;                headers: {'Authorization': token}&#10;            });&#10;&#10;            if (!res.ok) {&#10;                const text = await res.text();&#10;                showFloatMsg(parentEl, &quot;❌ &quot; + text, false);&#10;&#10;                // If backend says already owned, we can refresh state so UI flips to Equip.&#10;                await refreshUserState();&#10;                await refreshRodsState();&#10;                renderRods();&#10;                return;&#10;            }&#10;&#10;            showFloatMsg(parentEl, `✅ You bought ${name} for ${price} coins!`, true);&#10;&#10;            await refreshUserState();&#10;            await refreshRodsState();&#10;            renderRods();&#10;        }&#10;&#10;        async function equipFishingRod(name, parentEl) {&#10;            const res = await fetch(`/api/shop/fishing_rods/${encodeURIComponent(name)}/equip`, {&#10;                method: 'POST',&#10;                headers: {'Authorization': token}&#10;            });&#10;&#10;            if (!res.ok) {&#10;                const text = await res.text();&#10;                showFloatMsg(parentEl, &quot;❌ &quot; + (text || 'Unable to equip'), false);&#10;                await refreshUserState();&#10;                await refreshRodsState();&#10;                renderRods();&#10;                return;&#10;            }&#10;&#10;            showFloatMsg(parentEl, `✅ Equipped ${name}!`, true);&#10;            await refreshUserState();&#10;            await refreshRodsState();&#10;            renderRods();&#10;        }&#10;&#10;    })();&#10;&lt;/script&gt;&#10;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/edu/upc/dsa/models/dto/TokenDTO.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/edu/upc/dsa/models/dto/TokenDTO.java" />
              <option name="updatedContent" value="package edu.upc.dsa.models.dto;&#10;&#10;public class TokenDTO {&#10;    private String token;&#10;&#10;    public TokenDTO() {}&#10;&#10;    public TokenDTO(String token) { this.token = token; }&#10;&#10;    public String getToken() { return token; }&#10;    public void setToken(String token) { this.token = token; }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>